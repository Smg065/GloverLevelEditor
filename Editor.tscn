[gd_scene load_steps=6 format=3 uid="uid://dugtly3kgxxfd"]

[ext_resource type="Script" path="res://Scripts/LevelEditor.gd" id="1_h6myy"]
[ext_resource type="PackedScene" uid="uid://bw3yla7fanmp" path="res://Resources/Level.tscn" id="2_84d1u"]
[ext_resource type="PackedScene" uid="uid://caqvmryobj62v" path="res://Resources/UI/DiffuseLight.tscn" id="2_gchqt"]
[ext_resource type="Script" path="res://Scripts/CameraControls.gd" id="3_2uaqy"]
[ext_resource type="PackedScene" uid="uid://dxhym4rncpirh" path="res://Resources/UI/ButtonChoiceWindow.tscn" id="5_upakm"]

[node name="Editor" type="Node" node_paths=PackedStringArray("diffuseLightList", "cameraControls", "modelLoadWindow", "level", "openModel", "openTexture", "confirmOverwrite")]
script = ExtResource("1_h6myy")
diffuseLightList = NodePath("UI/RightPanel/ScrollContainer/RightPanelSettings/DiffuseLightPanel/ScrollContainer/DiffuseLightContainer")
diffuseLightUiPrefab = ExtResource("2_gchqt")
cameraControls = NodePath("CameraControls")
modelLoadWindow = NodePath("Windows/ModelSelector/ButtonChoiceWindow")
level = NodePath("LevelRoot")
openModel = NodePath("Windows/OpenModel")
openTexture = NodePath("Windows/OpenTexture")
confirmOverwrite = NodePath("Windows/ConfirmOverwrite")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
metadata/_edit_use_anchors_ = true

[node name="RightPanel" type="ReferenceRect" parent="UI"]
custom_minimum_size = Vector2(256, 0)
layout_mode = 1
anchors_preset = -1
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 0
grow_vertical = 2
mouse_filter = 2
border_width = 16.0
metadata/_edit_use_anchors_ = true

[node name="ScrollContainer" type="ScrollContainer" parent="UI/RightPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="RightPanelSettings" type="VBoxContainer" parent="UI/RightPanel/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 10
alignment = 2

[node name="FogEntry" type="ReferenceRect" parent="UI/RightPanel/ScrollContainer/RightPanelSettings"]
custom_minimum_size = Vector2(0, 96)
layout_mode = 2
border_color = Color(0.53, 0.53, 0.53, 1)
border_width = 16.0

[node name="FogToggle" type="CheckBox" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.253036
anchor_right = 0.746964
anchor_bottom = 0.322917
grow_horizontal = 2
text = "Fog Enabled"
alignment = 1
metadata/_edit_use_anchors_ = true

[node name="ColorPickerButton" type="ColorPickerButton" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.333
anchor_right = 1.0
anchor_bottom = 0.667
grow_horizontal = 0
grow_vertical = 2

[node name="NearSpin" type="SpinBox" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.178138
anchor_top = 0.677083
anchor_right = 0.514423
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 0
max_value = 9999.0
metadata/_edit_use_anchors_ = true

[node name="DistanceSpin" type="SpinBox" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.663968
anchor_top = 0.677083
anchor_right = 1.00025
anchor_bottom = 1.0
offset_right = -1.52588e-05
grow_horizontal = 2
grow_vertical = 0
max_value = 9999.0
metadata/_edit_use_anchors_ = true

[node name="Label" type="Label" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.322917
anchor_right = 0.497976
anchor_bottom = 0.666667
grow_horizontal = 2
grow_vertical = 2
text = "Fog Color"
horizontal_alignment = 1
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="Label2" type="Label" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.677083
anchor_right = 0.178138
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 0
text = "Near"
horizontal_alignment = 1
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="Label3" type="Label" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.497976
anchor_top = 0.677083
anchor_right = 0.663968
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 0
text = "Dist
"
horizontal_alignment = 1
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="DiffuseLightPanel" type="ReferenceRect" parent="UI/RightPanel/ScrollContainer/RightPanelSettings"]
custom_minimum_size = Vector2(0, 180)
layout_mode = 2
mouse_filter = 2
border_color = Color(0.273389, 0.584141, 0.66192, 1)
border_width = 16.0

[node name="ScrollContainer" type="ScrollContainer" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/DiffuseLightPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 30.0
grow_horizontal = 2
grow_vertical = 2
horizontal_scroll_mode = 0

[node name="DiffuseLightContainer" type="VBoxContainer" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/DiffuseLightPanel/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 0

[node name="Label" type="Label" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/DiffuseLightPanel"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 23.0
grow_horizontal = 2
text = "Diffuse Lights"
horizontal_alignment = 1
vertical_alignment = 1

[node name="AmbientLightEntry" type="ReferenceRect" parent="UI/RightPanel/ScrollContainer/RightPanelSettings"]
custom_minimum_size = Vector2(0, 32)
layout_mode = 2
mouse_filter = 2
border_color = Color(1, 0.946667, 0.6, 1)
border_width = 16.0

[node name="AmbientLightColor" type="ColorPickerButton" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/AmbientLightEntry"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.51417
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(1, 1, 1, 1)
edit_alpha = false
metadata/_edit_use_anchors_ = true

[node name="Label" type="Label" parent="UI/RightPanel/ScrollContainer/RightPanelSettings/AmbientLightEntry"]
layout_mode = 1
anchors_preset = -1
anchor_right = 0.51417
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "Ambient Light"
horizontal_alignment = 1
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="ScrollContainer2" type="ScrollContainer" parent="UI/RightPanel"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 0.5
grow_horizontal = 2
horizontal_scroll_mode = 0
metadata/_edit_use_anchors_ = true

[node name="ScrollContainer" type="VBoxContainer" parent="UI/RightPanel/ScrollContainer2"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ScrollContainer3" type="ScrollContainer" parent="UI/RightPanel"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.512346
anchor_right = 1.0
anchor_bottom = 0.842593
grow_horizontal = 2
grow_vertical = 2
horizontal_scroll_mode = 0
metadata/_edit_use_anchors_ = true

[node name="ScrollContainer" type="VBoxContainer" parent="UI/RightPanel/ScrollContainer3"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="LevelRoot" parent="." instance=ExtResource("2_84d1u")]

[node name="CameraControls" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
script = ExtResource("3_2uaqy")
camera = NodePath("MainCamera")

[node name="MainCamera" type="Camera3D" parent="CameraControls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2)

[node name="Windows" type="Node" parent="."]

[node name="OpenModel" type="FileDialog" parent="Windows"]
title = "Open a File"
size = Vector2i(322, 180)
ok_button_text = "Open"
file_mode = 0
access = 2
filters = PackedStringArray("*.gltf,*.glb;Model")
use_native_dialog = true

[node name="OpenTexture" type="FileDialog" parent="Windows"]
auto_translate_mode = 1
title = "Open a File"
size = Vector2i(322, 180)
ok_button_text = "Open"
file_mode = 0
access = 2
filters = PackedStringArray("*.png,*.jpg,*.jpeg,*.bmp;Image")
use_native_dialog = true

[node name="ConfirmOverwrite" type="ConfirmationDialog" parent="Windows"]
initial_position = 4
unresizable = true
popup_window = true
force_native = true
dialog_text = "Override model ''?"

[node name="ModelSelector" type="Window" parent="Windows"]
title = "Select Model"
initial_position = 1
size = Vector2i(672, 384)
wrap_controls = true
transient = true
min_size = Vector2i(672, 192)

[node name="ButtonChoiceWindow" parent="Windows/ModelSelector" instance=ExtResource("5_upakm")]

[connection signal="toggled" from="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry/FogToggle" to="." method="set_fog_enabled"]
[connection signal="color_changed" from="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry/ColorPickerButton" to="." method="set_fog_color"]
[connection signal="value_changed" from="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry/NearSpin" to="." method="set_fog_near"]
[connection signal="value_changed" from="UI/RightPanel/ScrollContainer/RightPanelSettings/FogEntry/DistanceSpin" to="." method="set_fog_distance"]
[connection signal="color_changed" from="UI/RightPanel/ScrollContainer/RightPanelSettings/AmbientLightEntry/AmbientLightColor" to="." method="set_ambient_light_color"]
[connection signal="file_selected" from="Windows/OpenModel" to="." method="model_file_selected"]
[connection signal="file_selected" from="Windows/OpenTexture" to="." method="image_file_selected"]
[connection signal="canceled" from="Windows/ConfirmOverwrite" to="." method="cancel_overwrite"]
[connection signal="confirmed" from="Windows/ConfirmOverwrite" to="." method="confirm_overwrite"]
